---
- name: LDAP | Configure - Stop the service
  ansible.builtin.service:
    name: slapd
    state: stopped
    enabled: false

- name: LDAP | Configure - Remove database folder
  ansible.builtin.file:
    path: /var/lib/ldap
    state: absent

- name: LDAP | Configure - Recreate database directory
  ansible.builtin.file:
    path: /var/lib/ldap
    state: directory
    mode: 0700
    owner: openldap
    group: openldap

- name: LDAP | Configure - Start the service
  ansible.builtin.service:
    name: slapd
    state: started
    enabled: true
